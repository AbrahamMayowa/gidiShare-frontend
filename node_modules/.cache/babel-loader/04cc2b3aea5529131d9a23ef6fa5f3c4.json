{"ast":null,"code":"import _objectSpread from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Redirect}from'react-router-dom';import{Formik}from'formik';import SyncLoader from'./SyncLoader';//import '../styles/signup.css'\nimport'../styles/uploadForm.css';import uploadThunk from'../redux/action/uploadThunk';import TextareaAutosize from'react-autosize-textarea';import imageListThunk from'../redux/action/imageListActionThunk';var UploadImage=function UploadImage(_ref){var handleUpload=_ref.handleUpload;var dispatch=useDispatch();var SingleData=useSelector(function(store){return store.singleImage;});var token=useSelector(function(store){return store.auth.token;});var error=SingleData.error,success=SingleData.success,loading=SingleData.loading,imageId=SingleData.imageId;var _useState=useState({category:{error:'',value:''},description:{error:'',value:''},image:{error:'',value:null}}),_useState2=_slicedToArray(_useState,2),uploadData=_useState2[0],setUploadData=_useState2[1];var handleChange=function handleChange(event){event.persist();var target=event.target;if(target.name==='category'){if(!target.value){setUploadData(function(prevState){return _objectSpread({},prevState,{category:{error:'Category is required',value:''}});});}else{setUploadData(function(prevState){return _objectSpread({},prevState,{category:{error:'',value:target.value}});});}}else if(target.name==='description'){if(!target.value){setUploadData(function(prevState){return _objectSpread({},prevState,{description:{error:'Description is required',value:''}});});}else{setUploadData(function(prevState){return _objectSpread({},prevState,{description:{error:'',value:target.value}});});}}else if(target.name==='image'){if(!target.files[0]){setUploadData(function(prevState){return _objectSpread({},prevState,{image:{error:'Image is required',value:''}});});}else if(target.files[0]){var supportedImageType=['image/png','image/jpeg','image/jpg'];if(!supportedImageType.includes(target.files[0].type)){setUploadData(function(prevState){return _objectSpread({},prevState,{image:{error:'Only png, jpeg or jpg image mimetype is supported'}});});}else{setUploadData(function(prevState){return _objectSpread({},prevState,{image:{error:'',value:target.files[0]}});});}}}};var handleSubmit=function handleSubmit(event){event.preventDefault();var _uploadData=_objectSpread({},uploadData),category=_uploadData.category,description=_uploadData.description,image=_uploadData.image;if(!category.value){setUploadData(function(prevState){return _objectSpread({},prevState,{category:{error:'Category is required',value:''}});});}else if(!description.value){setUploadData(function(prevState){return _objectSpread({},prevState,{description:{error:'description is requird',value:''}});});}else if(!image.value){setUploadData(function(prevState){return _objectSpread({},prevState,{image:{error:'Upload a supported photo format',value:''}});});}else if(category.value&&description.value&&image.value){dispatch(uploadThunk(image.value,description.value,category.value,token));}};if(success&&!error){return React.createElement(Redirect,{to:\"/details/\".concat(imageId)});}return React.createElement(\"div\",{className:\"form-wrapper\"},React.createElement(\"div\",{className:\"form_control\"},React.createElement(\"div\",{className:\"signup\"},\"Upload Photo\"),React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(\"div\",{className:\"category-wrapper\"},React.createElement(\"label\",{htmlFor:\"category-option\"},\"Image category\"),React.createElement(\"select\",{name:\"category\",onChange:handleChange,className:\"category\"},React.createElement(\"option\",{selected:true,value:\"Love\"},\"Love\"),React.createElement(\"option\",{value:\"Celebration\"},\"Celebration\"),React.createElement(\"option\",{value:\"Happiness\"},\"Happiness\"),React.createElement(\"option\",{value:\"Sadness\"},\"Sadness\"),React.createElement(\"option\",{value:\"Throwback\"},\"ThrowBack\"),React.createElement(\"option\",{value:\"General\"},\"General\")),React.createElement(\"div\",{className:\"form-error\"},uploadData.category.error?React.createElement(\"div\",null,uploadData.category.error):null)),React.createElement(\"div\",{className:\"description-wrapper\"},React.createElement(\"label\",{htmlFor:\"description\"},\"Caption\"),React.createElement(TextareaAutosize,{name:\"description\",rows:6,onChange:handleChange,className:\"description\"})),React.createElement(\"div\",{className:\"form-error\"},uploadData.description.error?React.createElement(\"div\",null,uploadData.description.error):null),React.createElement(\"div\",{className:\"image-upload\"},React.createElement(\"input\",{id:\"image\",name:\"image\",type:\"file\",onChange:handleChange})),React.createElement(\"div\",{className:\"form-error\"},uploadData.image.error?uploadData.image.error:null,uploadData.image.value&&React.createElement(\"div\",{className:\"image-name\"},uploadData.image.value.name)),React.createElement(\"div\",{className:\"cancel-signup-wrapper\"},React.createElement(\"div\",{className:\"cancel-signup\",onClick:handleUpload},\"Cancel\"),React.createElement(\"button\",{className:\"upload-submit\",type:\"submit\"},loading?React.createElement(\"div\",{className:\"load\"},React.createElement(SyncLoader,null)):'Submit'))),error&&React.createElement(\"div\",{className:\"reducer-error\"},error)));};export default UploadImage;","map":{"version":3,"sources":["/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/src/components/UploadForm.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Redirect","Formik","SyncLoader","uploadThunk","TextareaAutosize","imageListThunk","UploadImage","handleUpload","dispatch","SingleData","store","singleImage","token","auth","error","success","loading","imageId","category","value","description","image","uploadData","setUploadData","handleChange","event","persist","target","name","prevState","files","supportedImageType","includes","type","handleSubmit","preventDefault"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA0C,OAA1C,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,OAAQC,MAAR,KAAqB,QAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA;AACA,MAAO,0BAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,yBAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,sCAA3B,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAoB,IAAlBC,CAAAA,YAAkB,MAAlBA,YAAkB,CACrC,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,UAAU,CAAGV,WAAW,CAAC,SAAAW,KAAK,QAAIA,CAAAA,KAAK,CAACC,WAAV,EAAN,CAA9B,CACA,GAAMC,CAAAA,KAAK,CAAGb,WAAW,CAAC,SAAAW,KAAK,QAAIA,CAAAA,KAAK,CAACG,IAAN,CAAWD,KAAf,EAAN,CAAzB,CAHqC,GAI9BE,CAAAA,KAJ8B,CAIML,UAJN,CAI9BK,KAJ8B,CAIvBC,OAJuB,CAIMN,UAJN,CAIvBM,OAJuB,CAIdC,OAJc,CAIMP,UAJN,CAIdO,OAJc,CAILC,OAJK,CAIMR,UAJN,CAILQ,OAJK,eAKDpB,QAAQ,CAAC,CACzCqB,QAAQ,CAAE,CAACJ,KAAK,CAAE,EAAR,CAAYK,KAAK,CAAE,EAAnB,CAD+B,CAEzCC,WAAW,CAAE,CAACN,KAAK,CAAE,EAAR,CAAYK,KAAK,CAAE,EAAnB,CAF4B,CAGzCE,KAAK,CAAC,CAACP,KAAK,CAAE,EAAR,CAAYK,KAAK,CAAE,IAAnB,CAHmC,CAAD,CALP,wCAK9BG,UAL8B,eAKlBC,aALkB,eAWpC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAS,CAC1BA,KAAK,CAACC,OAAN,GACA,GAAMC,CAAAA,MAAM,CAAGF,KAAK,CAACE,MAArB,CACI,GAAGA,MAAM,CAACC,IAAP,GAAgB,UAAnB,CAA8B,CAC1B,GAAG,CAACD,MAAM,CAACR,KAAX,CAAiB,CACbI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBX,QAAQ,CAAE,CAACJ,KAAK,CAAE,sBAAR,CAAgCK,KAAK,CAAE,EAAvC,CAFS,IAAV,CAAb,CAIH,CALD,IAKK,CACDI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBX,QAAQ,CAAE,CAACJ,KAAK,CAAE,EAAR,CAAYK,KAAK,CAAEQ,MAAM,CAACR,KAA1B,CAFS,IAAV,CAAb,CAIH,CACJ,CAZD,IAYM,IAAGQ,MAAM,CAACC,IAAP,GAAgB,aAAnB,CAAiC,CACnC,GAAG,CAACD,MAAM,CAACR,KAAX,CAAiB,CACbI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBT,WAAW,CAAC,CAACN,KAAK,CAAE,yBAAR,CAAmCK,KAAK,CAAE,EAA1C,CAFO,IAAV,CAAb,CAIH,CALD,IAKK,CACDI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBT,WAAW,CAAE,CAACN,KAAK,CAAE,EAAR,CAAYK,KAAK,CAAEQ,MAAM,CAACR,KAA1B,CAFM,IAAV,CAAb,CAIH,CACJ,CAZK,IAcD,IAAGQ,MAAM,CAACC,IAAP,GAAgB,OAAnB,CAA2B,CAC5B,GAAG,CAACD,MAAM,CAACG,KAAP,CAAa,CAAb,CAAJ,CAAoB,CAChBP,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBR,KAAK,CAAE,CAACP,KAAK,CAAE,mBAAR,CAA6BK,KAAK,CAAE,EAApC,CAFY,IAAV,CAAb,CAIH,CALD,IAKM,IAAGQ,MAAM,CAACG,KAAP,CAAa,CAAb,CAAH,CAAmB,CACrB,GAAMC,CAAAA,kBAAkB,CAAG,CAAC,WAAD,CAAc,YAAd,CAA4B,WAA5B,CAA3B,CACA,GAAG,CAACA,kBAAkB,CAACC,QAAnB,CAA4BL,MAAM,CAACG,KAAP,CAAa,CAAb,EAAgBG,IAA5C,CAAJ,CAAsD,CAClDV,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBR,KAAK,CAAE,CAACP,KAAK,CAAE,mDAAR,CAFY,IAAV,CAAb,CAIH,CALD,IAKK,CACLS,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBR,KAAK,CAAE,CAACP,KAAK,CAAE,EAAR,CAAYK,KAAK,CAAEQ,MAAM,CAACG,KAAP,CAAa,CAAb,CAAnB,CAFY,IAAV,CAAb,CAIH,CACA,CAER,CACJ,CAnDD,CAqDA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACT,KAAD,CAAS,CAC1BA,KAAK,CAACU,cAAN,GAD0B,iCAEiBb,UAFjB,EAEnBJ,QAFmB,aAEnBA,QAFmB,CAETE,WAFS,aAETA,WAFS,CAEIC,KAFJ,aAEIA,KAFJ,CAG1B,GAAG,CAACH,QAAQ,CAACC,KAAb,CAAmB,CACfI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBX,QAAQ,CAAE,CAACJ,KAAK,CAAE,sBAAR,CAAgCK,KAAK,CAAE,EAAvC,CAFS,IAAV,CAAb,CAIH,CALD,IAKM,IAAG,CAACC,WAAW,CAACD,KAAhB,CAAsB,CACxBI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBT,WAAW,CAAE,CAACN,KAAK,CAAE,wBAAR,CAAkCK,KAAK,CAAE,EAAzC,CAFM,IAAV,CAAb,CAIH,CALK,IAKA,IAAG,CAACE,KAAK,CAACF,KAAV,CAAgB,CAClBI,aAAa,CAAC,SAAAM,SAAS,0BAChBA,SADgB,EAEnBR,KAAK,CAAE,CAACP,KAAK,CAAC,iCAAP,CAA0CK,KAAK,CAAE,EAAjD,CAFY,IAAV,CAAb,CAIH,CALK,IAKA,IAAGD,QAAQ,CAACC,KAAT,EAAkBC,WAAW,CAACD,KAA9B,EAAuCE,KAAK,CAACF,KAAhD,CAAsD,CACxDX,QAAQ,CAACL,WAAW,CAACkB,KAAK,CAACF,KAAP,CAAcC,WAAW,CAACD,KAA1B,CAAiCD,QAAQ,CAACC,KAA1C,CAAiDP,KAAjD,CAAZ,CAAR,CACH,CACJ,CArBD,CAuBA,GAAGG,OAAO,EAAI,CAACD,KAAf,CAAqB,CACjB,MAAO,qBAAC,QAAD,EAAU,EAAE,oBAAcG,OAAd,CAAZ,EAAP,CACH,CACD,MAEI,4BAAK,SAAS,CAAC,cAAf,EACA,2BAAK,SAAS,CAAC,cAAf,EACI,2BAAK,SAAS,CAAC,QAAf,iBADJ,CAGI,4BAAM,QAAQ,CAAEiB,YAAhB,EACI,2BAAK,SAAS,CAAC,kBAAf,EACQ,6BAAO,OAAO,CAAC,iBAAf,mBADR,CAEQ,8BAAQ,IAAI,CAAC,UAAb,CAAwB,QAAQ,CAAEV,YAAlC,CAAgD,SAAS,CAAC,UAA1D,EACI,8BAAQ,QAAQ,KAAhB,CAAiB,KAAK,CAAC,MAAvB,SADJ,CAEI,8BAAQ,KAAK,CAAC,aAAd,gBAFJ,CAGI,8BAAQ,KAAK,CAAC,WAAd,cAHJ,CAII,8BAAQ,KAAK,CAAC,SAAd,YAJJ,CAKI,8BAAQ,KAAK,CAAC,WAAd,cALJ,CAMI,8BAAQ,KAAK,CAAC,SAAd,YANJ,CAFR,CAWA,2BAAK,SAAS,CAAC,YAAf,EACKF,UAAU,CAACJ,QAAX,CAAoBJ,KAApB,CACA,+BAAMQ,UAAU,CAACJ,QAAX,CAAoBJ,KAA1B,CADA,CACyC,IAF9C,CAXA,CADJ,CAkBI,2BAAK,SAAS,CAAC,qBAAf,EACI,6BAAO,OAAO,CAAC,aAAf,YADJ,CAEG,oBAAC,gBAAD,EAAkB,IAAI,CAAC,aAAvB,CAAqC,IAAI,CAAE,CAA3C,CAA8C,QAAQ,CAAEU,YAAxD,CAAsE,SAAS,CAAC,aAAhF,EAFH,CAlBJ,CAsBI,2BAAK,SAAS,CAAC,YAAf,EACKF,UAAU,CAACF,WAAX,CAAuBN,KAAvB,CACG,+BAAMQ,UAAU,CAACF,WAAX,CAAuBN,KAA7B,CADH,CAEE,IAHP,CAtBJ,CA4BI,2BAAK,SAAS,CAAC,cAAf,EACI,6BACI,EAAE,CAAC,OADP,CAEI,IAAI,CAAC,OAFT,CAGI,IAAI,CAAC,MAHT,CAII,QAAQ,CAAEU,YAJd,EADJ,CA5BJ,CAqCI,2BAAK,SAAS,CAAC,YAAf,EACCF,UAAU,CAACD,KAAX,CAAiBP,KAAjB,CAAyBQ,UAAU,CAACD,KAAX,CAAiBP,KAA1C,CAAkD,IADnD,CAGCQ,UAAU,CAACD,KAAX,CAAiBF,KAAjB,EAA2B,2BAAK,SAAS,CAAC,YAAf,EAA6BG,UAAU,CAACD,KAAX,CAAiBF,KAAjB,CAAuBS,IAApD,CAH5B,CArCJ,CA0CI,2BAAK,SAAS,CAAC,uBAAf,EACI,2BAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAErB,YAAxC,WADJ,CAEI,8BAAQ,SAAS,CAAC,eAAlB,CAAkC,IAAI,CAAC,QAAvC,EAAiDS,OAAO,CAAG,2BAAK,SAAS,CAAC,MAAf,EAAsB,oBAAC,UAAD,MAAtB,CAAH,CAAgD,QAAxG,CAFJ,CA1CJ,CAHJ,CAmDKF,KAAK,EAAK,2BAAK,SAAS,CAAC,eAAf,EAAgCA,KAAhC,CAnDf,CADA,CAFJ,CA0DH,CApJD,CAsJA,cAAeR,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState} from 'react'\nimport {useDispatch, useSelector} from 'react-redux'\nimport {Redirect} from 'react-router-dom'\nimport {Formik} from 'formik'\nimport SyncLoader from './SyncLoader' \n//import '../styles/signup.css'\nimport '../styles/uploadForm.css'\nimport uploadThunk from '../redux/action/uploadThunk'\nimport TextareaAutosize from 'react-autosize-textarea'\nimport imageListThunk from '../redux/action/imageListActionThunk'\n\nconst UploadImage = ({handleUpload}) => {\n   const dispatch = useDispatch()\n   const SingleData = useSelector(store => store.singleImage)\n   const token = useSelector(store => store.auth.token)\n   const {error, success, loading, imageId} = SingleData\n   const [uploadData, setUploadData] = useState({\n       category: {error: '', value: ''},\n       description: {error: '', value: ''},\n       image:{error: '', value: null}\n    })\n\n    const handleChange = (event)=>{\n        event.persist()\n        const target = event.target;\n            if(target.name === 'category'){\n                if(!target.value){\n                    setUploadData(prevState => ({\n                        ...prevState,\n                        category: {error: 'Category is required', value: '',}\n                    }))\n                }else{\n                    setUploadData(prevState =>({\n                        ...prevState,\n                        category: {error: '', value: target.value}\n                    }))\n                }\n            }else if(target.name === 'description'){\n                if(!target.value){\n                    setUploadData(prevState =>({\n                        ...prevState,\n                        description:{error: 'Description is required', value: ''}\n                    }))\n                }else{\n                    setUploadData(prevState => ({\n                        ...prevState,\n                        description: {error: '', value: target.value}\n                    }))\n                }\n            }\n\n            else if(target.name === 'image'){\n                if(!target.files[0]){\n                    setUploadData(prevState =>({\n                        ...prevState,\n                        image: {error: 'Image is required', value: ''}\n                    }))\n                }else if(target.files[0]){\n                    const supportedImageType = ['image/png', 'image/jpeg', 'image/jpg']\n                    if(!supportedImageType.includes(target.files[0].type)){\n                        setUploadData(prevState =>({\n                            ...prevState,\n                            image: {error: 'Only png, jpeg or jpg image mimetype is supported'}\n                        }))\n                    }else{\n                    setUploadData(prevState => ({\n                        ...prevState,\n                        image: {error: '', value: target.files[0]}\n                    }))\n                }\n                }\n\n        }\n    }\n\n    const handleSubmit = (event)=>{\n        event.preventDefault()\n        const {category, description, image} = {...uploadData}\n        if(!category.value){\n            setUploadData(prevState =>({\n                ...prevState,\n                category: {error: 'Category is required', value: ''}\n            }))\n        }else if(!description.value){\n            setUploadData(prevState =>({\n                ...prevState,\n                description: {error: 'description is requird', value: ''}\n            }))\n        }else if(!image.value){\n            setUploadData(prevState =>({\n                ...prevState,\n                image: {error:'Upload a supported photo format', value: ''}\n            }))\n        }else if(category.value && description.value && image.value){\n            dispatch(uploadThunk(image.value, description.value, category.value, token))\n        }\n    }\n\n    if(success && !error){\n        return <Redirect to={`/details/${imageId}`} />\n    }\n    return (\n\n        <div className=\"form-wrapper\">\n        <div className=\"form_control\">\n            <div className='signup'>Upload Photo</div>\n            \n            <form onSubmit={handleSubmit}>\n                <div className='category-wrapper'>\n                        <label htmlFor='category-option'>Image category</label>\n                        <select name=\"category\" onChange={handleChange} className='category'>\n                            <option selected value=\"Love\">Love</option>\n                            <option value=\"Celebration\">Celebration</option>\n                            <option value=\"Happiness\">Happiness</option>\n                            <option value=\"Sadness\">Sadness</option>\n                            <option value='Throwback'>ThrowBack</option>\n                            <option value=\"General\">General</option>\n                        </select>\n\n                <div className='form-error'>\n                    {uploadData.category.error ? \n                    (<div>{uploadData.category.error}</div>): null}\n                </div>\n                </div>\n\n                <div className='description-wrapper'>\n                    <label htmlFor='description'>Caption</label>\n                   <TextareaAutosize name='description' rows={6} onChange={handleChange} className='description' />\n                </div>\n                <div className='form-error'>\n                    {uploadData.description.error ? (\n                        <div>{uploadData.description.error}</div> \n                    ): null}\n                </div>\n\n                <div className='image-upload'>\n                    <input\n                        id='image'\n                        name='image'\n                        type='file'\n                        onChange={handleChange}\n                    />\n                   \n                </div>\n                <div className='form-error'>\n                {uploadData.image.error ? uploadData.image.error : null }\n                \n                {uploadData.image.value && (<div className='image-name'>{uploadData.image.value.name}</div>)}\n                </div>\n                <div className='cancel-signup-wrapper'>\n                    <div className='cancel-signup' onClick={handleUpload}>Cancel</div>\n                    <button className='upload-submit' type='submit'>{loading ? <div className='load'><SyncLoader /></div> : 'Submit'}</button>\n                  \n                </div>\n            </form>\n            {error && (<div className='reducer-error'>{error}</div>)}\n        </div>\n    </div>\n    )\n}\n\nexport default UploadImage"]},"metadata":{},"sourceType":"module"}