{"ast":null,"code":"import _classCallCheck from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import ImageCard from'../components/ImageCard';import Header from'../components/HeaderSection';import{connect}from'react-redux';import{withRouter,Redirect}from'react-router-dom';import Loading from'../components/Loading';import NoItem from'../components/NoItem';import imageListThunk from'../redux/action/imageListActionThunk';import thumpThunk from'../redux/action/thumpThunk';import'../styles/imageList.css';import Footer from'../components/Footer';var Images=/*#__PURE__*/function(_React$Component){_inherits(Images,_React$Component);function Images(props){var _this;_classCallCheck(this,Images);_this=_possibleConstructorReturn(this,_getPrototypeOf(Images).call(this,props));_this.handleThumpUp=function(imageId){var token=_this.props.auth.token;console.log(imageId);if(!token){_this.props.handleLogin();}else{_this.props.dispatch(thumpThunk(imageId,token));}};_this.handleThumpDown=function(imageId){var token=_this.props.auth.token;if(!token){_this.props.handleLogin();}else{_this.props.dispatch(thumpThunk(imageId,token,false));}};_this.handleDetailsRedirect=function(imageId){_this.props.history.push(\"/details/\".concat(imageId));};return _this;}_createClass(Images,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.dispatch(imageListThunk());}// componentDidUpdate(prevProps){\n//   if(prevProps.images.error === 'You are not authorized'){\n//     prevProps.handleLogin()\n//}\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.auth.success!==prevProps.auth.success){this.props.handleLogin();}}},{key:\"render\",value:function render(){var _this2=this;var _this$props$images=this.props.images,images=_this$props$images.images,loading=_this$props$images.loading;var imageUrl=this.props.auth.imageUrl;var noImageOrImageCard=React.createElement(NoItem,null);if(images.length>0){noImageOrImageCard=images.map(function(image){return React.createElement(ImageCard,{image:image,detailsRedirect:_this2.handleDetailsRedirect,handleLogin:_this2.props.handleLogin,handleThumpUp:_this2.handleThumpUp,handleThumpDown:_this2.handleThumpDown});});}return React.createElement(\"div\",null,React.createElement(\"section\",{className:\"card-session\"},React.createElement(Header,{userImageUrl:imageUrl,handleUpload:this.props.handleUploadForm,handleLogin:this.props.handleLogin}),loading?React.createElement(\"div\",{className:\"loading\"},React.createElement(Loading,null)):noImageOrImageCard),React.createElement(Footer,null));}}]);return Images;}(React.Component);var mapState=function mapState(state){return{auth:state.auth,images:state.images};};export default withRouter(connect(mapState)(Images));","map":{"version":3,"sources":["/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/src/screen/ImageList.js"],"names":["React","ImageCard","Header","connect","withRouter","Redirect","Loading","NoItem","imageListThunk","thumpThunk","Footer","Images","props","handleThumpUp","imageId","token","auth","console","log","handleLogin","dispatch","handleThumpDown","handleDetailsRedirect","history","push","prevProps","success","images","loading","imageUrl","noImageOrImageCard","length","map","image","handleUploadForm","Component","mapState","state"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ImageCard from '../components/ImageCard'\nimport Header from '../components/HeaderSection'\nimport {connect} from 'react-redux'\nimport {withRouter, Redirect} from 'react-router-dom'\nimport Loading from '../components/Loading'\nimport NoItem from '../components/NoItem'\nimport imageListThunk from '../redux/action/imageListActionThunk'\nimport thumpThunk from '../redux/action/thumpThunk'\nimport '../styles/imageList.css'\nimport Footer from '../components/Footer'\n\n\n\nclass Images extends React.Component{\n\n    constructor(props){\n        super(props)\n    }\n\n    componentDidMount(){\n        this.props.dispatch(imageListThunk())   \n    }\n\n   // componentDidUpdate(prevProps){\n     //   if(prevProps.images.error === 'You are not authorized'){\n       //     prevProps.handleLogin()\n        //}\n\n    componentDidUpdate(prevProps){\n        if(this.props.auth.success !== prevProps.auth.success){\n            this.props.handleLogin()\n        }\n    }\n\n\n    handleThumpUp = (imageId) =>{\n        const token = this.props.auth.token\n        console.log(imageId)\n        if(!token){\n            this.props.handleLogin()\n        }else{\n            this.props.dispatch(thumpThunk(imageId, token))\n        }\n    }\n\n\n\n    handleThumpDown=(imageId)=>{\n        const token = this.props.auth.token\n        if(!token){\n            this.props.handleLogin()\n        }else{\n            this.props.dispatch(thumpThunk(imageId, token, false))\n        }\n\n    }\n\n    handleDetailsRedirect =(imageId)=>{\n        this.props.history.push(`/details/${imageId}`)\n\n    }\n\n    render(){\n        const {images, loading} = this.props.images\n        const {imageUrl} = this.props.auth\n\n        let noImageOrImageCard = <NoItem />\n\n        if(images.length > 0){\n            noImageOrImageCard = images.map(image => <ImageCard  image={image} \n                detailsRedirect={this.handleDetailsRedirect} handleLogin={this.props.handleLogin} \n                handleThumpUp={this.handleThumpUp} handleThumpDown={this.handleThumpDown}/>)\n        }\n\n        return (\n        <div>\n            <section className='card-session'>\n                <Header userImageUrl={imageUrl} handleUpload={this.props.handleUploadForm} handleLogin={this.props.handleLogin}/>\n                {loading ? <div className='loading'><Loading /></div> : noImageOrImageCard}\n            </section>\n\n            <Footer />\n            </div>\n\n        )\n    }\n\n}\n\nconst mapState = (state) => {\n    return {\n        auth: state.auth,\n        images: state.images\n\n    }\n}\n\nexport default withRouter(connect(mapState)(Images))"]},"metadata":{},"sourceType":"module"}