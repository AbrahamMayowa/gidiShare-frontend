{"ast":null,"code":"var _jsxFileName = \"/home/mayor/gidiShare2/frontend/src/components/ImageCard.js\";\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport '../styles/imageCard.css';\nimport moment from 'moment';\n\nconst ImageCard = props => {\n  const authError = useSelector(store => store.images.error);\n  const userId = useSelector(store => store.auth.userId);\n  useEffect(() => {\n    if (authError === 'You are not authorized') {\n      props.handleLogin();\n    }\n  }, [authError]);\n  const image = props.image;\n  const createdTime = new Date().toDateString(image.createdAt);\n  const momentTime = moment(createdTime).fromNow();\n  let thumpUpUser = null;\n  let thumpDownUser = null;\n\n  const thumpedStyle = () => {\n    console.log('call'); // check if user is authenticated to know if the user had thumped the image\n\n    if (userId && image) {\n      console.log('callin'); // only thumped up image is looped\n\n      if (image.thumpUp.thumpUpCount) {\n        thumpUpUser = image.thumpUp.userActionThumpUp.find(id => id._id === userId);\n        console.log(thumpUpUser);\n      }\n\n      if (image.thumpDown.userActionThumpDown) {\n        thumpDownUser = image.thumpDown.userActionThumpDown.find(id => id._id === userId);\n        console.log(thumpDownUser);\n      }\n    }\n  };\n\n  useEffect(() => {\n    console.log('w');\n    thumpedStyle();\n  }, [userId]);\n  return React.createElement(\"div\", {\n    key: image.imageId,\n    className: 'card-wrapper ' + (props.isDetailsCard && 'details_card'),\n    onClick: () => {\n      if (props.detailsRedirect) {\n        props.detailsRedirect(image.imageId);\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    className: \"creator\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"creator-image-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: `http://localhost:5000/static/${image.creator.imageUrl}`,\n    alt: \"creator\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, image.creator.username)), React.createElement(\"section\", {\n    className: \"image-url\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: `http://localhost:5000/static/${image.imageUrl}`,\n    alt: \"share\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })), React.createElement(\"section\", {\n    className: \"data-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"thump\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"thump\",\n    onClick: e => {\n      e.stopPropagation();\n      props.handleThumpUp(image.imageId);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"far fa-thumbs-up thumpup-icon \" + (thumpUpUser ? 'thumped' : ''),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"thump-count \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, image.thumpUp.thumpUpCount)), React.createElement(\"div\", {\n    className: \"thump\",\n    onClick: e => {\n      e.stopPropagation();\n      props.handleThumpDown(image.imageId);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    class: \"far fa-thumbs-down thumpdown-icon \" + (thumpDownUser ? 'thumped' : ''),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"thump-count \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, image.thumpDown.thumpDownCount))), React.createElement(\"div\", {\n    className: \"description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, image.description)), React.createElement(\"div\", {\n    className: \"time-category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"moment-time\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, momentTime), React.createElement(\"div\", {\n    className: \"category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, image.category)));\n};\n\nexport default ImageCard;","map":{"version":3,"sources":["/home/mayor/gidiShare2/frontend/src/components/ImageCard.js"],"names":["React","useEffect","useSelector","moment","ImageCard","props","authError","store","images","error","userId","auth","handleLogin","image","createdTime","Date","toDateString","createdAt","momentTime","fromNow","thumpUpUser","thumpDownUser","thumpedStyle","console","log","thumpUp","thumpUpCount","userActionThumpUp","find","id","_id","thumpDown","userActionThumpDown","imageId","isDetailsCard","detailsRedirect","creator","imageUrl","username","e","stopPropagation","handleThumpUp","handleThumpDown","thumpDownCount","description","category"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\nimport {useSelector} from 'react-redux'\nimport '../styles/imageCard.css'\nimport moment from 'moment'\n\n\nconst ImageCard = (props) =>{\n    const authError = useSelector(store => store.images.error) \n    const userId = useSelector(store => store.auth.userId)\n    useEffect(()=>{\n        if(authError === 'You are not authorized'){\n            props.handleLogin()\n        }\n    }, [authError])\n    \n    const image = props.image\n    const createdTime = new Date().toDateString(image.createdAt)\n    const momentTime = moment(createdTime).fromNow()\n    let thumpUpUser = null\n    let thumpDownUser = null\n\n\n    const thumpedStyle = () =>{\n        console.log('call')\n        // check if user is authenticated to know if the user had thumped the image\n        if(userId && image){\n            console.log('callin')\n            // only thumped up image is looped\n            if(image.thumpUp.thumpUpCount){\n                thumpUpUser = image.thumpUp.userActionThumpUp.find(id => id._id === userId)\n                console.log(thumpUpUser)\n                \n            }\n            \n\n            if(image.thumpDown.userActionThumpDown){\n                thumpDownUser = image.thumpDown.userActionThumpDown.find(id => id._id === userId)\n                console.log(thumpDownUser)\n            }\n        }\n    }\n\n    useEffect(()=>{\n        console.log('w')\n        thumpedStyle()}, [userId])\n\n\n    return(\n            <div key={image.imageId} className={'card-wrapper ' + (props.isDetailsCard && 'details_card' )} onClick={() => {\n                if(props.detailsRedirect){\n                    props.detailsRedirect(image.imageId)\n                }\n                    \n            }\n            }\n            >\n                 <section className='creator'>\n                    <div className='creator-image-wrapper'>\n                        <img src={`http://localhost:5000/static/${image.creator.imageUrl}`} alt='creator'/> \n                    </div>\n                    <div className='username'>{image.creator.username}</div>\n                </section>\n                    \n                <section className='image-url'>\n                    <img src={`http://localhost:5000/static/${image.imageUrl}`} alt=\"share\"/>\n                </section>\n\n                <section className='data-description'>\n                    <div className='thump'>\n                        <div className=\"thump\" onClick={(e) =>{\n                            e.stopPropagation()\n                            props.handleThumpUp(image.imageId)\n                        }}>\n\n                        <i className={\"far fa-thumbs-up thumpup-icon \" + (thumpUpUser ? 'thumped' : '')}></i>\n                        <div className='thump-count '>\n                            {image.thumpUp.thumpUpCount}\n                        </div>\n\n                        </div>\n                        <div className='thump' onClick={(e)=>{\n                            e.stopPropagation()\n                            props.handleThumpDown(image.imageId)\n                        }}>\n                        <i class={\"far fa-thumbs-down thumpdown-icon \" + (thumpDownUser ? 'thumped' : '')}></i>\n                        <div className='thump-count '>\n                        {image.thumpDown.thumpDownCount}\n                        </div>\n                        </div>\n\n                    </div>\n\n                    <div className='description'>\n                        {image.description}\n                    </div>\n                \n                </section>\n                <div className='time-category'>\n                        <div className='moment-time'>{momentTime}</div>\n                        <div className='category'>{image.category}</div>\n                </div>\n            </div>\n        )\n}\n\nexport default ImageCard"]},"metadata":{},"sourceType":"module"}