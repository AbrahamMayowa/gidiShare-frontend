{"ast":null,"code":"import { loginFail, loginStart, loginSuccess } from './login';\n\nconst loginActionThunk = (username, password) => {\n  return async dispatch => {\n    dispatch(loginStart());\n    const graphqlQuery = {\n      query: `\n            mutation loginMutation($username: String!, $password: String!){\n                login(username: $username, password: $password){\n                    token\n                    refreshToken\n                    userId\n                    expiresIn\n                    username\n                    imageUrl\n                }\n            }`,\n      variables: {\n        username,\n        password\n      }\n    };\n\n    try {\n      const response = await fetch('/graphql', {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        method: 'POST',\n        body: JSON.stringify(graphqlQuery)\n      });\n      const resData = await response.json();\n\n      if (resData.errors) {\n        if (resData.errors[0].status === 4) {\n          throw new Error('Invalid password or username');\n        }\n\n        throw new Error('A server error occured!');\n      }\n\n      dispatch(loginSuccess(resData));\n    } catch (error) {\n      dispatch(loginFail(error));\n    }\n  };\n};\n\nexport default loginActionThunk;","map":{"version":3,"sources":["/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/src/redux/action/loginThunk.js"],"names":["loginFail","loginStart","loginSuccess","loginActionThunk","username","password","dispatch","graphqlQuery","query","variables","response","fetch","headers","method","body","JSON","stringify","resData","json","errors","status","Error","error"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,UAAnB,EAA+BC,YAA/B,QAAkD,SAAlD;;AAGA,MAAMC,gBAAgB,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAuB;AAC5C,SAAO,MAAMC,QAAN,IAAkB;AACrBA,IAAAA,QAAQ,CAACL,UAAU,EAAX,CAAR;AAEA,UAAMM,YAAY,GAAG;AACjBC,MAAAA,KAAK,EAAG;;;;;;;;;;cADS;AAajBC,MAAAA,SAAS,EAAE;AACPL,QAAAA,QADO;AAEPC,QAAAA;AAFO;AAbM,KAArB;;AAmBA,QAAG;AACH,YAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,UAAD,EAAa;AACrCC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX,SAD4B;AAIrCC,QAAAA,MAAM,EAAE,MAJ6B;AAKrCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,YAAf;AAL+B,OAAb,CAA5B;AASA,YAAMU,OAAO,GAAG,MAAMP,QAAQ,CAACQ,IAAT,EAAtB;;AAEA,UAAGD,OAAO,CAACE,MAAX,EAAkB;AACd,YAAGF,OAAO,CAACE,MAAR,CAAe,CAAf,EAAkBC,MAAlB,KAA6B,CAAhC,EAAkC;AAC9B,gBAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;AACH;;AACD,cAAM,IAAIA,KAAJ,CAAU,yBAAV,CAAN;AACH;;AAEDf,MAAAA,QAAQ,CAACJ,YAAY,CAACe,OAAD,CAAb,CAAR;AACH,KApBG,CAoBH,OAAMK,KAAN,EAAY;AACThB,MAAAA,QAAQ,CAACN,SAAS,CAACsB,KAAD,CAAV,CAAR;AACH;AACA,GA7CD;AA8CH,CA/CD;;AAiDA,eAAenB,gBAAf","sourcesContent":["import {loginFail, loginStart, loginSuccess} from './login'\n\n\nconst loginActionThunk = (username, password) =>{\n    return async dispatch => {\n        dispatch(loginStart())\n\n        const graphqlQuery = {\n            query: `\n            mutation loginMutation($username: String!, $password: String!){\n                login(username: $username, password: $password){\n                    token\n                    refreshToken\n                    userId\n                    expiresIn\n                    username\n                    imageUrl\n                }\n            }`,\n\n            variables: {\n                username,\n                password\n            }\n        }\n\n        try{\n        const response = await fetch('/graphql', {\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            method: 'POST',\n            body: JSON.stringify(graphqlQuery)\n\n        })\n\n        const resData = await response.json()\n    \n        if(resData.errors){\n            if(resData.errors[0].status === 4){\n                throw new Error('Invalid password or username')\n            }\n            throw new Error('A server error occured!')\n        }\n\n        dispatch(loginSuccess(resData))\n    }catch(error){\n        dispatch(loginFail(error))\n    }\n    }\n}\n\nexport default loginActionThunk"]},"metadata":{},"sourceType":"module"}