{"ast":null,"code":"var _jsxFileName = \"/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/src/screen/ImageList.js\";\nimport React from 'react';\nimport ImageCard from '../components/ImageCard';\nimport Header from '../components/HeaderSection';\nimport { connect } from 'react-redux';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport Loading from '../components/Loading';\nimport NoItem from '../components/NoItem';\nimport imageListThunk from '../redux/action/imageListActionThunk';\nimport thumpThunk from '../redux/action/thumpThunk';\nimport '../styles/imageList.css';\nimport Footer from '../components/Footer';\n\nclass Images extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleThumpUp = imageId => {\n      const token = this.props.auth.token;\n\n      if (!token) {\n        this.props.handleLogin();\n      } else {\n        this.props.dispatch(thumpThunk(imageId, token));\n      }\n    };\n\n    this.handleThumpDown = imageId => {\n      const token = this.props.auth.token;\n\n      if (!token) {\n        this.props.handleLogin();\n      } else {\n        this.props.dispatch(thumpThunk(imageId, token, false));\n      }\n    };\n\n    this.handleDetailsRedirect = imageId => {\n      this.props.history.push(`/details/${imageId}`);\n    };\n  }\n\n  componentDidMount() {\n    this.props.dispatch(imageListThunk());\n  } // componentDidUpdate(prevProps){\n  //   if(prevProps.images.error === 'You are not authorized'){\n  //     prevProps.handleLogin()\n  //}\n\n\n  componentDidUpdate(prevProps) {\n    if (this.props.auth.success !== prevProps.auth.success) {\n      this.props.handleLogin();\n    }\n  }\n\n  render() {\n    const _this$props$images = this.props.images,\n          images = _this$props$images.images,\n          loading = _this$props$images.loading;\n    const imageUrl = this.props.auth.imageUrl;\n    let noImageOrImageCard = React.createElement(NoItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    });\n\n    if (images.length > 0) {\n      noImageOrImageCard = images.map(image => React.createElement(ImageCard, {\n        image: image,\n        detailsRedirect: this.handleDetailsRedirect,\n        handleLogin: this.props.handleLogin,\n        handleThumpUp: this.handleThumpUp,\n        handleThumpDown: this.handleThumpDown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"card-session\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Header, {\n      userImageUrl: imageUrl,\n      handleUpload: this.props.handleUploadForm,\n      handleLogin: this.props.handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), loading ? React.createElement(\"div\", {\n      className: \"loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })) : noImageOrImageCard), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapState = state => {\n  return {\n    auth: state.auth,\n    images: state.images\n  };\n};\n\nexport default withRouter(connect(mapState)(Images));","map":{"version":3,"sources":["/Users/mayowa/Desktop/gidiShare-update/api/gidiShare-frontend/src/screen/ImageList.js"],"names":["React","ImageCard","Header","connect","withRouter","Redirect","Loading","NoItem","imageListThunk","thumpThunk","Footer","Images","Component","constructor","props","handleThumpUp","imageId","token","auth","handleLogin","dispatch","handleThumpDown","handleDetailsRedirect","history","push","componentDidMount","componentDidUpdate","prevProps","success","render","images","loading","imageUrl","noImageOrImageCard","length","map","image","handleUploadForm","mapState","state"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ImageCard from '../components/ImageCard'\nimport Header from '../components/HeaderSection'\nimport {connect} from 'react-redux'\nimport {withRouter, Redirect} from 'react-router-dom'\nimport Loading from '../components/Loading'\nimport NoItem from '../components/NoItem'\nimport imageListThunk from '../redux/action/imageListActionThunk'\nimport thumpThunk from '../redux/action/thumpThunk'\nimport '../styles/imageList.css'\nimport Footer from '../components/Footer'\n\n\n\nclass Images extends React.Component{\n\n    constructor(props){\n        super(props)\n    }\n\n    componentDidMount(){\n        this.props.dispatch(imageListThunk())   \n    }\n\n   // componentDidUpdate(prevProps){\n     //   if(prevProps.images.error === 'You are not authorized'){\n       //     prevProps.handleLogin()\n        //}\n\n    componentDidUpdate(prevProps){\n        if(this.props.auth.success !== prevProps.auth.success){\n            this.props.handleLogin()\n        }\n    }\n\n\n    handleThumpUp = (imageId) =>{\n        const token = this.props.auth.token\n     \n        if(!token){\n            this.props.handleLogin()\n        }else{\n            this.props.dispatch(thumpThunk(imageId, token))\n        }\n    }\n\n\n\n    handleThumpDown=(imageId)=>{\n        const token = this.props.auth.token\n        if(!token){\n            this.props.handleLogin()\n        }else{\n            this.props.dispatch(thumpThunk(imageId, token, false))\n        }\n\n    }\n\n    handleDetailsRedirect =(imageId)=>{\n        this.props.history.push(`/details/${imageId}`)\n\n    }\n\n    render(){\n        const {images, loading} = this.props.images\n        const {imageUrl} = this.props.auth\n\n        let noImageOrImageCard = <NoItem />\n\n        if(images.length > 0){\n            noImageOrImageCard = images.map(image => <ImageCard  image={image} \n                detailsRedirect={this.handleDetailsRedirect} handleLogin={this.props.handleLogin} \n                handleThumpUp={this.handleThumpUp} handleThumpDown={this.handleThumpDown}/>)\n        }\n\n        return (\n        <div>\n            <section className='card-session'>\n                <Header userImageUrl={imageUrl} handleUpload={this.props.handleUploadForm} handleLogin={this.props.handleLogin}/>\n                {loading ? <div className='loading'><Loading /></div> : noImageOrImageCard}\n            </section>\n\n            <Footer />\n            </div>\n\n        )\n    }\n\n}\n\nconst mapState = (state) => {\n    return {\n        auth: state.auth,\n        images: state.images\n\n    }\n}\n\nexport default withRouter(connect(mapState)(Images))"]},"metadata":{},"sourceType":"module"}